"use strict";
(self["webpackChunktheme"] = self["webpackChunktheme"] || []).push([["BannerSlider"],{

/***/ "./src/js/components/BannerSlider.js":
/*!*******************************************!*\
  !*** ./src/js/components/BannerSlider.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BannerSlider)
/* harmony export */ });
/* harmony import */ var swiper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! swiper */ "./node_modules/swiper/swiper.mjs");
/* harmony import */ var gsap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gsap */ "./node_modules/gsap/index.js");
/* harmony import */ var swiper_modules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swiper/modules */ "./node_modules/swiper/modules/index.mjs");
/* harmony import */ var gsap_SplitText__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gsap/SplitText */ "./node_modules/gsap/SplitText.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/js/utils.js");
/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }





var BannerSlider = /*#__PURE__*/_createClass(function BannerSlider() {
  var _this = this;
  _classCallCheck(this, BannerSlider);
  _defineProperty(this, "init", function () {
    _this.setDomMap();
    _this.bindEvents();
  });
  _defineProperty(this, "setDomMap", function () {});
  _defineProperty(this, "bindEvents", function () {
    // const animateBanner = $('.home-banner');

    // gsap.to(animateBanner,{
    //     clipPath: "polygon(0 100%, 100% 100%, 100% 0%, 0 0%)",
    //     duration: 1,
    // })

    console.log('test');
    var captionTitle = $(".banner-block .caption h1");
    function clearAndSplitText(element) {
      var splitText = new gsap_SplitText__WEBPACK_IMPORTED_MODULE_3__.SplitText(element, {
        type: "words,lines",
        wordsClass: "word word++",
        linesClass: "line line++"
      });
      return splitText.lines;
    }
    var titleHeadingSplitTextWords = clearAndSplitText(captionTitle);
    var bannerSlider = document.querySelector(".banner-slider");
    if (bannerSlider) {
      var progressBars = document.querySelectorAll(".p-bar");
      var bannerCounts = document.querySelectorAll(".banner-count");
      var swiper = new swiper__WEBPACK_IMPORTED_MODULE_0__["default"](bannerSlider, {
        slidesPerView: 1,
        speed: 1000,
        effect: "fade",
        loop: true,
        crossFade: true,
        autoplay: {
          delay: 6000,
          disableOnInteraction: false
        },
        touchEventsTarget: "container",
        modules: [swiper_modules__WEBPACK_IMPORTED_MODULE_1__.EffectFade, swiper_modules__WEBPACK_IMPORTED_MODULE_1__.Autoplay],
        on: {
          autoplayTimeLeft: function autoplayTimeLeft(s, time, progress) {
            if (progress == 1) {
              progressBars.forEach(function (progressBar) {
                progressBar.style.setProperty("width", "0%");
              });
            } else {
              var activeIndex = s.realIndex;
              var activeProgressBar = progressBars[activeIndex];
              activeProgressBar.style.setProperty("width", "".concat(100 * (1 - progress), "%"));
            }
          },
          slideChangeTransitionStart: function slideChangeTransitionStart() {
            var activebannerCount = bannerCounts[this.realIndex];
            var currentSlideIndex = this.realIndex;
            bannerCounts.forEach(function (bannerCount) {
              bannerCount.classList.remove("active");
            });
            freeSlider.slideTo(currentSlideIndex);
            setTimeout(function () {
              activebannerCount.classList.add("active");
            }, 100);
            var captionTitleBlock = $(".banner-block .caption h1");
            var captionTitleDiv = $(".banner-block .caption h1 .line");
            var captionSubTitle = $(".banner-block .caption h2");
            var rightBlock = $(".banner-block .right-block");
            gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(captionSubTitle, {
              duration: 0.6,
              autoAlpha: 0,
              y: "-150%",
              ease: "Power2.easeOut"
            });
            if (_utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches) {
              gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(rightBlock, {
                duration: 0.6,
                autoAlpha: 0,
                y: "-100%",
                ease: "Power2.easeOut"
              });
            }
            gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(captionTitleDiv, {
              duration: 0.6,
              autoAlpha: 0,
              y: "-50%",
              ease: "Power2.easeOut",
              stagger: 0.1,
              onComplete: function onComplete() {
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(captionTitleBlock, {
                  autoAlpha: 0
                });
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(captionTitleDiv, {
                  y: "100%",
                  autoAlpha: 0
                });
                if (_utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches) {
                  gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(rightBlock, {
                    y: "-50%"
                  });
                }
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(captionSubTitle, {
                  y: "50%",
                  autoAlpha: 0
                });
                captionTitle.html('');
                var currentSlide = document.querySelector('.slide-items .swiper-slide:nth-child(' + (currentSlideIndex + 1) + ')');
                var h3Text = '';
                var lastNodeWasBr = false;
                currentSlide.querySelector('h3').childNodes.forEach(function (node) {
                  if (node.nodeType === Node.TEXT_NODE) {
                    if (lastNodeWasBr) {
                      h3Text += ' '; // Add space if last node was <br>
                    }
                    h3Text += node.textContent;
                    lastNodeWasBr = false;
                  } else if (node.tagName === 'BR') {
                    if (!_utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches) {
                      h3Text += '<br>'; // Preserve <br> tag
                      lastNodeWasBr = true;
                    }
                  }
                });
                captionTitle.html(h3Text);
                var titleHeadingSplit = clearAndSplitText(captionTitle);
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(captionTitleBlock, {
                  autoAlpha: 1
                });
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(captionSubTitle, {
                  y: "0%",
                  duration: 0.6,
                  autoAlpha: 1,
                  ease: "Power2.easeOut"
                });
                if (_utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches) {
                  gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(rightBlock, {
                    duration: 0.6,
                    autoAlpha: 1,
                    y: "0%",
                    ease: "Power2.easeOut"
                  });
                }
                gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(titleHeadingSplit, {
                  duration: 0.6,
                  autoAlpha: 1,
                  y: "0%",
                  ease: "Power2.easeOut",
                  stagger: 0.1
                });
              }
            });
          }
        }
      });
      var bannerFreeSlide = document.querySelector(".banner-free-slide");
      var freeSlider = new swiper__WEBPACK_IMPORTED_MODULE_0__["default"](bannerFreeSlide, {
        slidesPerView: "auto",
        speed: 1000,
        freeMode: true,
        touchEventsTarget: "container"
      });
    }
    function bannerAnimation() {
      var header = $("header .max-container");
      var bannerBlock = $(".banner-block");
      var bannerSlider = $(".banner-block .banner-slider");
      var captionSubTitle = $(".banner-block .caption h2");
      var videoBlock = $(".banner-block .video-block");
      var captionTitle = $(".banner-block .caption h1");
      var bannerFreeSliderFirstCount = $(".banner-free-slide .swiper-slide:first-child p");
      var bannerFreeSliderProgressBlock = $(".banner-free-slide .progress-block");
      var bannerFreeSliderTitle = $(".banner-free-slide h3");
      var duration2000 = 0.2;
      var duration4000 = 0.4;
      var duration6000 = 0.6;
      var duration8000 = 0.8;
      var duration10000 = 1;
      gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(bannerBlock, {
        clipPath: "polygon(0 100%, 100% 100%, 100% 0%, 0 0%)",
        duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration8000 : duration10000,
        ease: "Power3.easeInOut",
        onComplete: function onComplete() {
          fullAnimation();
        }
      });
      gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(bannerSlider, {
        scale: 1,
        duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration8000 : duration10000,
        delay: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration2000 : duration4000,
        ease: "Power1.easeOut"
      });
      function fullAnimation() {
        gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(header, {
          clipPath: "polygon(0 100%, 100% 100%, 100% 0%, 0 0%)",
          duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration6000 : duration8000,
          ease: "0.25,0.1,0.25,1",
          onComplete: function onComplete() {
            gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.set(header, {
              clipPath: "none"
            });
          }
        });
        gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(captionSubTitle, {
          autoAlpha: 1,
          y: 0,
          duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration6000 : duration8000,
          ease: "Power3.easeOut"
        });
        gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(titleHeadingSplitTextWords, {
          duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration6000 : duration10000,
          autoAlpha: 1,
          y: 0,
          ease: "Power2.easeOut",
          stagger: 0.2,
          onStart: function onStart() {
            bannerFreeSliderFirstCount.addClass("active");
            gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(bannerFreeSliderProgressBlock, {
              width: "100%",
              duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration6000 : duration8000,
              delay: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? 0 : 0.2,
              ease: "Power3.easeOut"
            });
            gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(bannerFreeSliderTitle, {
              autoAlpha: 1,
              y: 0,
              duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration6000 : duration8000,
              delay: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? 0 : 0.3,
              ease: "Power3.easeOut"
            });
          }
        });
        gsap__WEBPACK_IMPORTED_MODULE_4__.gsap.to(videoBlock, {
          scale: 1,
          autoAlpha: 1,
          duration: _utils__WEBPACK_IMPORTED_MODULE_2__.max767.matches ? duration8000 : duration10000,
          ease: "Power1.easeOut",
          onComplete: function onComplete() {
            setTimeout(function () {
              lazy();
            }, 3000);
          }
        });
      }
    }

    // var firstImage = document.querySelector(".first-image");
    // if (firstImage) {
    //         var load = firstImage.complete;
    //         if (load) {
    //             bannerAnimation();
    //         }
    // }

    bannerAnimation();
    function lazy() {
      var videoLazy = document.querySelectorAll(".banner-slider .b-lazy-video");
      var imageLazy = document.querySelectorAll(".banner-slider .b-lazy-image");
      imageLazy.forEach(function (image) {
        if (!image.classList.contains("loaded")) {
          image.classList.add("loaded");
          var imgDataSrc = image.getAttribute("data-src");
          if (imgDataSrc) {
            image.setAttribute("src", imgDataSrc);
            image.onload = function () {
              image.classList.add("loaded-full-image");
            };
          }
        }
      });
      videoLazy.forEach(function (video) {
        if (!video.classList.contains("loaded")) {
          var videoDataSrc = video.getAttribute("data-src");
          var newSource = document.createElement("source");
          newSource.setAttribute("src", videoDataSrc);
          video.classList.add("loaded");
          video.appendChild(newSource);
          video.removeAttribute("data-src");
        }
      });
    }
  });
  this.init();
});


/***/ })

}]);
//# sourceMappingURL=BannerSlider-1.8.min.js.map